{% extends "base.html" %}

	{% block leftblocs %}
        {% ifequal nickname '' %}
		<div>
			<div class="title">
				<h3>Greetings anonymous!</h3>
			</div>
			<div class="content">
				<p>We don't know who you are, would you care to log in?</p>
			</div>
		</div>
        {% else %}
			<div>
				<div class="title">
					<h3>Greetings {{ nickname }}!</h3>
				</div>
				<div class="content">
				<p>Why not share some thoughts, or a link, or an image, or...well the sky's the limit!</p>
 				</div>
			</div>
			{% ifequal msg_num 0 %}
				<div>
					<div class="title">
						<h3>Ow! No messages!</h3>
					</div>
					<div class="content">
						<p>Looks like you don't have anything to read...</p>
						<p>Try following someone :)</p>
					</div>
				</div>
		   {% endifequal %}
		{% endifequal %}
  	{% endblock %}
	
	{% block main %}
        {% ifnotequal nickname '' %}
			<h2></h2>
           <div class="composer">
                <ul class="composer_controls">
                    <li><a href="/compose?mode=text" class="compose_text" {% ifequal composer_mode "text" %}id="current_composer"{% endifequal %}>text</a></li>
                    <li><a href="/compose?mode=image" class="compose_image" {% ifequal composer_mode "image" %}id="current_composer"{% endifequal %}>Image</a></li>
                </ul>
                <div class="composer_form">
                    {% ifequal composer_mode "text" %}
                        <form action="/post" method="post">
                            <div class="msg">
                                <p>Express yourself!</p>
                            </div>
                            <textarea name="textmessage" rows="3" cols="40"></textarea>
                            <br/>
                            <input type="submit" value="Send">
                        </form>
                    {% endifequal %}
                    {% ifequal composer_mode "image" %}
                        <form action="/post" method="post" enctype="multipart/form-data">
                            <div class="msg">
                                <p>Post a pic!</p>
                            </div>
                            <label for="imageupload">Image</label>
							<input type="file" name="imageupload"/>
                            <br/>
                            <label for="imgdesc">Image description</label>
                            <textarea name="imgdesc" rows="3" cols="40"></textarea>
                            <br/>
							<input type="submit" value="Upload">
                        </form>
                    {% endifequal %}
                </div>
            </div>
		{% else %}
			<h2>Welcome to Pint!</h2>
			<p>Here's what people have been posting recently:</p>
        {% endifnotequal %}
    
        {% for message in messages %}
        <div class="message">
            <cite class="{% cycle left,right %}">
				<img src="/avatar/{{ message.author.nickname }}"/>
				<br/>
                <a href="/user/{{ message.author.nickname }}"><b>{{ message.author.nickname }}</b></a>
             </cite>
            <blockquote>
				{% if message.image %}
				<a href="/image/{{ message.image.code }}">
				<img src="/thumb/{{ message.image.code }}"
				</a>
				{% endif %}
				<p>{{ message.content|markup }}</p>
				<span class="time">{{ message.date|humandate }}</span>
            </blockquote>
        </div>
        {% endfor %}
	{% endblock %}
